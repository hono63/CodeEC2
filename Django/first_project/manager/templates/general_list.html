{% extends "base.html" %}
{% block title %}Person List{% endblock %}
{% load staticfiles %}

{% block body %}
<!-- bootloader用おまじない -->
<div id="wrapper">  <div id="page-wrapper">	<div class="row"> <div class="col-lg-6 full-width margin-top-20percent"> <div class="panel panel-default full-width">

  <div class="panel-heading">
  Person List
  </div>
  <!-- 追加ボタン -->
  <a href="{% url 'person_add_page' %}" class="btn btn-default btn-sm">追加</a>
  <div class="panel-body full-width full-height">
    <table id="person-list-table" class="table table-striped table-bordered table-hover dataTable no-footer dtr-inline full-width">
      <thead>
        <tr>
          {% for f in label %}
            {% if f.is_relation == False and f.name != "id" %}
              <th>{{ f.name }}</th>
            {% endif %}
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for obj in serial %}
          {# withを使うときは=の隣にスペース空けないこと。 #}
          {% with ctr=forloop.counter %}
            <tr>
              {% for f,v in obj.fields.items %}
                {% if forloop.first %}
                  <td><a href="{% url 'person_detail_page' ctr %}">{{ v }}</a></td>
                {% else %}
                  <td>{{ v }}</td>
                {% endif %}
              {% endfor %}
            </tr>
          {% endwith %}
        {% endfor %}
      </tbody>
    </table>
  </div>

</div> </div> </div> </div> </div>
<script>
  $(document).ready(function() {
    $('#person-list-table').DataTable({
	  responsive: true,
	  // ordering: false,
	  displayLength: 20,
    });
  });
</script>
{% endblock %}


